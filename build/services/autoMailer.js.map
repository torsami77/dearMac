{"version":3,"sources":["../../src/services/autoMailer.js"],"names":["dotenv","config","sgMail","setApiKey","process","env","SENDGRID_API_KEY","sendEmail","receiver","category","data","retrievedData","html","subject","msg","to","from","result","send","request","success","message","error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEAA,gBAAOC,MAAP;;AAEAC,cAAOC,SAAP,CAAiBC,OAAO,CAACC,GAAR,CAAYC,gBAA7B;AAEA;;;;;;;;;;;;AAYA,MAAMC,SAAS,GAAG,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,IAA3B,KAAoC;AACpD,MAAI;AACF,UAAMC,aAAa,GAAG,mCAAuBF,QAAvB,EAAiCC,IAAjC,CAAtB;AACA,UAAM;AACJE,MAAAA,IADI;AAEJC,MAAAA;AAFI,QAGFF,aAHJ;AAIA,UAAMG,GAAG,GAAG;AACVC,MAAAA,EAAE,EAAEP,QADM;AAEVQ,MAAAA,IAAI,EAAE,6BAFI;AAGVH,MAAAA,OAHU;AAIVD,MAAAA;AAJU,KAAZ;AAMA,UAAMK,MAAM,GAAG,MAAMf,cAAOgB,IAAP,CAAYJ,GAAZ,CAArB;;AACA,QAAIG,MAAM,CAAC,CAAD,CAAN,IAAaA,MAAM,CAAC,CAAD,CAAN,CAAUE,OAA3B,EAAoC;AAClC,aAAO;AAAEC,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,OAAO,EAAE;AAA1B,OAAP;AACD;AACF,GAhBD,CAgBE,OAAOC,KAAP,EAAc;AACd,WAAO;AAAEF,MAAAA,OAAO,EAAE,KAAX;AAAkBE,MAAAA;AAAlB,KAAP;AACD;AACF,CApBD;;eAsBef,S","sourcesContent":["import sgMail from '@sendgrid/mail';\nimport dotenv from 'dotenv';\nimport { emailTemplatesFunction } from '../utils';\n\ndotenv.config();\n\nsgMail.setApiKey(process.env.SENDGRID_API_KEY);\n\n/**\n * Creates an instance of sendMail.\n *\n * @constructor\n * @param {string} receiver The desired email addres of the recipient.\n * @param {string} category Either of 'welcome' or 'passwordRecovery'.\n * @param {object} data Information about the user.\n * @param {string} data.firstName The first name of the requester.\n * @param {string} data.url The URL to be passed as string.\n */\n\n\nconst sendEmail = async (receiver, category, data) => {\n  try {\n    const retrievedData = emailTemplatesFunction(category, data);\n    const {\n      html,\n      subject\n    } = retrievedData;\n    const msg = {\n      to: receiver,\n      from: 'hello@dearmac.herokuapp.com',\n      subject,\n      html,\n    };\n    const result = await sgMail.send(msg);\n    if (result[0] && result[0].request) {\n      return { success: true, message: 'Email sent successfully' };\n    }\n  } catch (error) {\n    return { success: false, error };\n  }\n};\n\nexport default sendEmail;\n"],"file":"autoMailer.js"}