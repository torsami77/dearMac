{"version":3,"sources":["../../src/middlewares/validate.js"],"names":["validationName","rules","req","res","next","errors","resErrorMsg","array","forEach","error","param","msg","isEmpty","status","json"],"mappings":";;;;;;;AAAA;;AACA;;;;eAEgBA,cAAD,IAAoB;AACjC,QAAMC,KAAK,GAAG,yBAAaD,cAAb,CAAd;AACA,SAAO,CACL,GAAGC,KADE,EAEL,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAClB,UAAMC,MAAM,GAAG,wCAAiBH,GAAjB,CAAf;AACA,UAAMI,WAAW,GAAG,EAApB;AACAD,IAAAA,MAAM,CAACE,KAAP,GAAeC,OAAf,CAAwBC,KAAD,IAAW;AAChCH,MAAAA,WAAW,CAACG,KAAK,CAACC,KAAP,CAAX,GAA2BD,KAAK,CAACE,GAAjC;AACD,KAFD;;AAGA,QAAI,CAACN,MAAM,CAACO,OAAP,EAAL,EAAuB;AACrB,aAAOT,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAET,QAAAA,MAAM,EAAEC;AAAV,OAArB,CAAP;AACD;;AACD,WAAOF,IAAI,EAAX;AACD,GAZI,CAAP;AAcD,C","sourcesContent":["import { validationResult } from 'express-validator';\nimport getValidator from '../validation';\n\nexport default (validationName) => {\n  const rules = getValidator(validationName);\n  return [\n    ...rules,\n    (req, res, next) => {\n      const errors = validationResult(req);\n      const resErrorMsg = {};\n      errors.array().forEach((error) => {\n        resErrorMsg[error.param] = error.msg;\n      });\n      if (!errors.isEmpty()) {\n        return res.status(422).json({ errors: resErrorMsg });\n      }\n      return next();\n    }\n  ];\n};\n"],"file":"validate.js"}